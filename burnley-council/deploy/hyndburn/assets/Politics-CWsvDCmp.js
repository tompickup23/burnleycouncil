import{j as s}from"./tanstack-BHj98Y4o.js";import{r as n}from"./vendor-BUcjPAt-.js";import{u as y,L as N,S as g}from"./index-rU4F0J3P.js";import{M as f}from"./mail-BlmXtny-.js";import{P as v}from"./phone-BlMqDA3l.js";import"./recharts-OQS_r4Wn.js";function S(){const{data:m,loading:h}=y(["/data/councillors.json","/data/politics_summary.json","/data/wards.json"]),[p,e,b]=m||[[],null,{}],[l,u]=n.useState(""),[t,j]=n.useState(""),[o,x]=n.useState(null);if(n.useEffect(()=>(document.title="Council Politics | Burnley Council Transparency",()=>{document.title="Burnley Council Transparency"}),[]),h)return s.jsx(N,{message:"Loading councillor data..."});const d=p.filter(a=>{const c=!l||a.name?.toLowerCase().includes(l.toLowerCase())||a.ward?.toLowerCase().includes(l.toLowerCase()),i=!t||a.party===t;return c&&i}),r=e?.by_party||[];return s.jsxs("div",{className:"politics-page animate-fade-in",children:[s.jsxs("header",{className:"page-header",children:[s.jsx("h1",{children:"Council Politics"}),s.jsx("p",{className:"subtitle",children:"45 councillors representing 15 wards across Burnley"})]}),s.jsxs("section",{className:"composition-section",children:[s.jsx("h2",{children:"Council Composition"}),s.jsxs("div",{className:"composition-grid",children:[s.jsxs("div",{className:"composition-card coalition",children:[s.jsx("h3",{children:"Ruling Coalition"}),s.jsxs("div",{className:"coalition-makeup",children:[s.jsx("span",{className:"coalition-total",children:e?.coalition?.total_seats}),s.jsx("span",{className:"coalition-label",children:"seats"})]}),s.jsxs("div",{className:"coalition-parties",children:[s.jsxs("span",{className:"party-chip",style:{background:"#800080"},children:["Independent ",r.find(a=>a.party==="Independent")?.count||0]}),s.jsxs("span",{className:"party-chip",style:{background:"#faa61a",color:"#000"},children:["Lib Dem ",r.find(a=>a.party==="Liberal Democrats")?.count||0]}),s.jsxs("span",{className:"party-chip",style:{background:"#6ab023"},children:["Green ",r.find(a=>a.party==="Green Party")?.count||0]})]}),s.jsx("p",{className:"coalition-note text-secondary",children:"Majority threshold: 23 seats"})]}),s.jsxs("div",{className:"composition-card",children:[s.jsx("h3",{children:"Opposition"}),s.jsxs("div",{className:"opposition-makeup",children:[s.jsx("span",{className:"opposition-total",children:e?.opposition_seats}),s.jsx("span",{className:"opposition-label",children:"seats"})]}),s.jsxs("div",{className:"opposition-parties",children:[s.jsxs("span",{className:"party-chip",style:{background:"#dc241f"},children:["Labour ",(r.find(a=>a.party==="Labour")?.count||0)+(r.find(a=>a.party==="Labour & Co-operative Party")?.count||0)]}),s.jsxs("span",{className:"party-chip",style:{background:"#0087dc"},children:["Conservative ",r.find(a=>a.party==="Conservative")?.count||0]}),s.jsxs("span",{className:"party-chip",style:{background:"#12b6cf"},children:["Reform ",r.find(a=>a.party==="Reform UK")?.count||0]})]})]})]})]}),s.jsxs("section",{className:"seats-section",children:[s.jsx("h2",{children:"Seat Diagram"}),s.jsx("div",{className:"seats-diagram",children:r.map(a=>s.jsxs("div",{className:"party-seats",children:[s.jsx("div",{className:"seats-row",children:Array.from({length:a.count}).map((c,i)=>s.jsx("div",{className:"seat",style:{background:a.color},title:a.party},i))}),s.jsxs("span",{className:"party-label",style:{color:a.color},children:[a.party," (",a.count,")"]})]},a.party))})]}),s.jsxs("section",{className:"key-figures",children:[s.jsx("h2",{children:"Key Figures"}),s.jsxs("div",{className:"figures-grid",children:[e?.council_leader&&s.jsxs("div",{className:"figure-card",children:[s.jsx("span",{className:"figure-role",children:"Leader of the Council"}),s.jsx("span",{className:"figure-name",children:e.council_leader})]}),e?.mayor&&s.jsxs("div",{className:"figure-card",children:[s.jsx("span",{className:"figure-role",children:"Mayor"}),s.jsx("span",{className:"figure-name",children:e.mayor})]}),e?.deputy_mayor&&s.jsxs("div",{className:"figure-card",children:[s.jsx("span",{className:"figure-role",children:"Deputy Mayor"}),s.jsx("span",{className:"figure-name",children:e.deputy_mayor})]})]})]}),s.jsxs("section",{className:"directory-section",children:[s.jsx("h2",{children:"All Councillors"}),s.jsxs("div",{className:"directory-filters",children:[s.jsxs("div",{className:"search-bar",children:[s.jsx(g,{size:18,className:"search-icon"}),s.jsx("input",{type:"text",placeholder:"Search by name or ward...",value:l,onChange:a=>u(a.target.value)})]}),s.jsxs("select",{value:t,onChange:a=>j(a.target.value),children:[s.jsx("option",{value:"",children:"All Parties"}),r.map(a=>s.jsx("option",{value:a.party,children:a.party},a.party))]})]}),s.jsx("div",{className:"councillors-grid",children:d.map(a=>s.jsxs("div",{className:"councillor-card",onClick:()=>x(o?.id===a.id?null:a),children:[s.jsxs("div",{className:"councillor-header",children:[s.jsx("div",{className:"party-indicator",style:{background:a.party_color}}),s.jsxs("div",{className:"councillor-info",children:[s.jsx("h3",{children:a.name}),s.jsx("span",{className:"ward-name",children:a.ward})]})]}),s.jsx("div",{className:"councillor-party",children:s.jsx("span",{className:"party-tag",style:{background:a.party_color+"30",color:a.party_color},children:a.party})}),a.roles?.length>0&&s.jsx("div",{className:"councillor-roles",children:a.roles.map((c,i)=>s.jsx("span",{className:"role-tag",children:c},i))}),o?.id===a.id&&s.jsxs("div",{className:"councillor-details",children:[a.email&&s.jsxs("a",{href:`mailto:${a.email}`,className:"detail-link",children:[s.jsx(f,{size:14}),a.email]}),a.phone&&s.jsxs("a",{href:`tel:${a.phone}`,className:"detail-link",children:[s.jsx(v,{size:14}),a.phone]})]})]},a.id))}),d.length===0&&s.jsx("p",{className:"no-results",children:"No councillors found matching your search."})]})]})}export{S as default};
