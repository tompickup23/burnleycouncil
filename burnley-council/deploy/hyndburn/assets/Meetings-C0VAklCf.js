import{j as e}from"./tanstack-BHj98Y4o.js";import{r as c}from"./vendor-BUcjPAt-.js";import{c as b,u as S,L as $,C as L,g as f,I as E,a as N,M as v,F as y}from"./index-rU4F0J3P.js";import{F as A}from"./funnel-C-YHAbF0.js";import{E as F}from"./external-link-C4HyE6Jt.js";import"./recharts-OQS_r4Wn.js";const B=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],j=b("clock",B);const I=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],w=b("message-square",I),k={full_council:"Full Council",executive:"Executive",scrutiny:"Scrutiny",planning:"Planning",licensing:"Licensing",notice:"Forward Plan",partnership:"Partnership"},h={full_council:"#ff453a",executive:"#0a84ff",scrutiny:"#ff9f0a",planning:"#30d158",licensing:"#bf5af2",notice:"#8e8e93",partnership:"#64d2ff"};function R(n){return new Date(n+"T00:00:00").toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}function G(n){if(!n)return"TBC";const[l,d]=n.split(":"),a=parseInt(l,10);return`${a>12?a-12:a}:${d} ${a>=12?"PM":"AM"}`}function H(n){const l=new Date;l.setHours(0,0,0,0);const d=new Date(n+"T00:00:00"),a=Math.ceil((d-l)/(1e3*60*60*24));return a===0?"Today":a===1?"Tomorrow":a<0?"Past":`In ${a} days`}function W(){const{data:n,loading:l,error:d}=S("/data/meetings.json"),[a,p]=c.useState("all"),[m,_]=c.useState(!1),[C,T]=c.useState(null);c.useEffect(()=>(document.title="Meetings Calendar | Burnley Council Transparency",()=>{document.title="Burnley Council Transparency | Where Your Money Goes"}),[]);const x=c.useMemo(()=>{if(!n?.meetings)return[];const s=new Date;return s.setHours(0,0,0,0),n.meetings.filter(i=>!(!m&&new Date(i.date+"T00:00:00")<s&&!i.cancelled||i.cancelled&&!m||a!=="all"&&i.type!==a)).sort((i,r)=>i.date.localeCompare(r.date))},[n,a,m]),M=c.useMemo(()=>{if(!n?.meetings)return[];const s=new Set(n.meetings.map(i=>i.type));return Array.from(s)},[n]),P=c.useMemo(()=>n?.meetings?n.meetings.filter(s=>s.doge_relevance&&!s.cancelled).length:0,[n]);if(l)return e.jsx($,{message:"Loading meetings calendar..."});if(d||!n)return e.jsxs("div",{className:"meetings-page animate-fade-in",children:[e.jsx("h1",{children:"Meetings Calendar"}),e.jsx("p",{children:"Failed to load meetings data. Please try refreshing."})]});const t=n.how_to_attend;return e.jsxs("div",{className:"meetings-page animate-fade-in",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{children:"Meetings Calendar"}),e.jsx("p",{className:"subtitle",children:"Upcoming Burnley Council meetings with agenda analysis and public participation guidance"})]}),e.jsxs("div",{className:"meetings-info-banner",children:[e.jsxs("div",{className:"info-stat",children:[e.jsx(L,{size:18}),e.jsxs("span",{children:[e.jsx("strong",{children:x.filter(s=>!s.cancelled).length})," upcoming meetings"]})]}),e.jsxs("div",{className:"info-stat",children:[e.jsx(f,{size:18}),e.jsxs("span",{children:[e.jsx("strong",{children:P})," with spending relevance"]})]}),e.jsxs("div",{className:"info-stat",children:[e.jsx(j,{size:18}),e.jsxs("span",{children:["Updated ",new Date(n.last_updated).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]})]})]}),e.jsxs("details",{className:"how-to-attend",children:[e.jsxs("summary",{children:[e.jsx(E,{size:18}),e.jsx("span",{children:"How to attend and speak at council meetings"}),e.jsx(N,{size:16,className:"chevron"})]}),e.jsxs("div",{className:"how-to-content",children:[e.jsxs("div",{className:"how-to-grid",children:[e.jsxs("div",{className:"how-to-card",children:[e.jsxs("h4",{children:[e.jsx(v,{size:16})," Attending"]}),e.jsx("p",{children:t.general})]}),e.jsxs("div",{className:"how-to-card",children:[e.jsxs("h4",{children:[e.jsx(w,{size:16})," Speaking"]}),e.jsx("p",{children:t.speak_at_meeting})]}),e.jsxs("div",{className:"how-to-card",children:[e.jsxs("h4",{children:[e.jsx(j,{size:16})," Registration Deadlines"]}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Full Council, Executive, Scrutiny:"})," ",t.deadlines.full_council]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Planning & Licensing:"})," ",t.deadlines.development_control]})]})]}),e.jsxs("div",{className:"how-to-card",children:[e.jsxs("h4",{children:[e.jsx(y,{size:16})," Public Questions"]}),e.jsx("p",{children:t.public_questions})]})]}),e.jsxs("div",{className:"how-to-tips",children:[e.jsx("strong",{children:"Tips:"})," ",t.tips]}),e.jsxs("div",{className:"how-to-contact",children:["Contact: ",e.jsx("a",{href:`mailto:${t.contact}`,children:t.contact})]})]})]}),e.jsxs("div",{className:"meetings-filters",children:[e.jsxs("div",{className:"type-filters",children:[e.jsx(A,{size:16}),e.jsx("button",{className:`filter-pill ${a==="all"?"active":""}`,onClick:()=>p("all"),children:"All"}),M.map(s=>e.jsx("button",{className:`filter-pill ${a===s?"active":""}`,onClick:()=>p(s),style:a===s?{background:h[s],borderColor:h[s]}:{},children:k[s]||s},s))]}),e.jsxs("label",{className:"show-past-toggle",children:[e.jsx("input",{type:"checkbox",checked:m,onChange:s=>_(s.target.checked)}),"Show past & cancelled"]})]}),e.jsxs("div",{className:"meetings-list",children:[x.length===0&&e.jsx("div",{className:"no-meetings",children:"No meetings match your filters."}),x.map(s=>{const i=C===s.id,r=H(s.date),z=r==="Past",g=r==="Today",D=r==="Tomorrow";return e.jsxs("article",{className:`meeting-card ${s.cancelled?"cancelled":""} ${z?"past":""} ${g?"today":""} ${i?"expanded":""}`,onClick:()=>T(i?null:s.id),children:[e.jsxs("div",{className:"meeting-header",children:[e.jsxs("div",{className:"meeting-date-block",children:[e.jsx("span",{className:"meeting-day",children:new Date(s.date+"T00:00:00").getDate()}),e.jsx("span",{className:"meeting-month",children:new Date(s.date+"T00:00:00").toLocaleDateString("en-GB",{month:"short"})})]}),e.jsxs("div",{className:"meeting-info",children:[e.jsxs("div",{className:"meeting-title-row",children:[e.jsx("h3",{className:"meeting-title",children:s.committee}),e.jsx("span",{className:"meeting-type-badge",style:{background:`${h[s.type]}20`,color:h[s.type],borderColor:`${h[s.type]}40`},children:k[s.type]||s.type})]}),e.jsx("div",{className:"meeting-meta",children:s.cancelled?e.jsx("span",{className:"meeting-cancelled-badge",children:"CANCELLED"}):e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"meta-item",children:[e.jsx(j,{size:14})," ",G(s.time)]}),s.venue&&e.jsxs("span",{className:"meta-item",children:[e.jsx(v,{size:14})," ",s.venue]}),e.jsx("span",{className:`countdown-badge ${g?"today":""} ${D?"soon":""}`,children:r})]})}),s.status==="agenda_published"&&e.jsx("span",{className:"agenda-badge",children:"Agenda Published"})]}),e.jsxs("div",{className:"meeting-indicators",children:[s.doge_relevance&&e.jsx("span",{className:"doge-indicator",title:"Spending relevance identified",children:"Â£"}),e.jsx(N,{size:18,className:`expand-icon ${i?"rotated":""}`})]})]}),i&&!s.cancelled&&e.jsxs("div",{className:"meeting-details",children:[e.jsxs("div",{className:"meeting-detail-section",children:[e.jsx("h4",{children:"Summary"}),e.jsx("p",{children:s.summary})]}),s.agenda_items?.length>0&&e.jsxs("div",{className:"meeting-detail-section",children:[e.jsx("h4",{children:"Agenda Items"}),e.jsx("ul",{className:"agenda-list",children:s.agenda_items.map((o,u)=>e.jsx("li",{children:o},u))})]}),e.jsxs("div",{className:"meeting-detail-section",children:[e.jsx("h4",{children:"Public Relevance"}),e.jsx("p",{children:s.public_relevance})]}),s.doge_relevance&&e.jsxs("div",{className:"meeting-detail-section doge-section",children:[e.jsxs("h4",{children:[e.jsx(f,{size:16})," Spending & Accountability"]}),e.jsx("p",{children:s.doge_relevance})]}),s.speak_deadline&&e.jsxs("div",{className:"speak-deadline",children:[e.jsx(w,{size:14}),e.jsxs("span",{children:["Register to speak by: ",e.jsx("strong",{children:s.speak_deadline})]})]}),s.documents?.length>0&&e.jsxs("div",{className:"meeting-detail-section",children:[e.jsx("h4",{children:"Published Documents"}),e.jsx("div",{className:"doc-list",children:s.documents.map((o,u)=>e.jsxs("span",{className:"doc-badge",children:[e.jsx(y,{size:12})," ",o]},u))})]}),e.jsx("div",{className:"meeting-actions",children:s.link&&e.jsxs("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:"meeting-link",onClick:o=>o.stopPropagation(),children:[e.jsx(F,{size:14}),"View on ModernGov"]})})]})]},s.id)})]}),e.jsx("div",{className:"meetings-source",children:e.jsxs("p",{children:["Meeting data sourced from the ",e.jsx("a",{href:"https://burnley.moderngov.co.uk",target:"_blank",rel:"noopener noreferrer",children:"Burnley Council ModernGov portal"}),". Updated weekly. Agendas are typically published 5 working days before each meeting.",n.last_updated&&` Last checked: ${R(n.last_updated.split("T")[0])}.`]})})]})}export{W as default};
