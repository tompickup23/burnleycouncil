import{j as t}from"./tanstack-BHj98Y4o.js";import{h as y,r as l,L as g}from"./vendor-BUcjPAt-.js";import{c as w,u as N,a as b,L as $,C as k,f as C}from"./index-DW1kvklW.js";/* empty css             */import{A as h}from"./arrow-left-B767UeZu.js";import"./recharts-DyzHFDWD.js";const A=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],E=w("tag",A);function I(){const n=`${N().council_name||"Council"} Council Transparency`,{articleId:c}=y(),{data:p,loading:f}=b("/data/articles-index.json"),[m,u]=l.useState(null),[j,d]=l.useState(!0),e=p?.find(a=>a.id===c);return l.useEffect(()=>{if(!c)return;let a=!1;return d(!0),fetch(`/pendle/data/articles/${c}.json`).then(o=>{if(!o.ok)throw new Error("Article not found");return o.json()}).then(o=>{a||(u(o.content),d(!1))}).catch(()=>{a||(u(null),d(!1))}),()=>{a=!0}},[c]),l.useEffect(()=>{if(e){document.title=`${e.title} | ${n}`;let a=document.querySelector('meta[name="description"]');a||(a=document.createElement("meta"),a.setAttribute("name","description"),document.head.appendChild(a)),a.setAttribute("content",e.summary||"");const o={"og:title":e.title,"og:description":e.summary||"","og:type":"article","og:url":`${window.location.origin}/news/${e.id}`,"og:image":e.image?`${window.location.origin}${e.image}`:"","article:published_time":e.date,"article:author":e.author||n,"article:section":e.category||"News"};if(Object.entries(o).forEach(([i,x])=>{let r=document.querySelector(`meta[property="${i}"]`);r||(r=document.createElement("meta"),r.setAttribute("property",i),document.head.appendChild(r)),r.setAttribute("content",x)}),e.tags?.length){let i=document.querySelector('meta[name="keywords"]');i||(i=document.createElement("meta"),i.setAttribute("name","keywords"),document.head.appendChild(i)),i.setAttribute("content",e.tags.join(", "))}let s=document.getElementById("article-jsonld");s||(s=document.createElement("script"),s.id="article-jsonld",s.type="application/ld+json",document.head.appendChild(s)),s.textContent=JSON.stringify({"@context":"https://schema.org","@type":"NewsArticle",headline:e.title,description:e.summary||"",image:e.image?[`${window.location.origin}${e.image}`]:[],datePublished:e.date,dateModified:e.date,author:{"@type":"Organization",name:e.author||n,url:window.location.origin},publisher:{"@type":"Organization",name:n,url:window.location.origin},mainEntityOfPage:{"@type":"WebPage","@id":`${window.location.origin}/news/${e.id}`},articleSection:e.category||"News",keywords:e.tags?.join(", ")||""})}return()=>{document.title=`${n} | Where Your Money Goes`;const a=document.getElementById("article-jsonld");a&&a.remove()}},[e]),f||j?t.jsx($,{message:"Loading article..."}):e?t.jsxs("div",{className:"news-page animate-fade-in",children:[t.jsxs(g,{to:"/news",className:"back-button",children:[t.jsx(h,{size:18})," Back to News"]}),t.jsxs("article",{className:"article-full",itemScope:!0,itemType:"https://schema.org/NewsArticle",children:[t.jsx("meta",{itemProp:"author",content:e.author||n}),t.jsx("meta",{itemProp:"datePublished",content:e.date}),t.jsxs("header",{className:"article-header",children:[t.jsx("span",{className:`category-badge ${e.category?.toLowerCase()}`,children:e.category}),t.jsx("h1",{itemProp:"headline",children:e.title}),t.jsxs("div",{className:"article-meta",children:[t.jsxs("span",{className:"meta-item",children:[t.jsx(k,{size:16}),C(e.date,"long")]}),t.jsx("span",{className:"meta-item",children:e.author||n})]})]}),e.image&&t.jsx("div",{className:"article-image",children:t.jsx("img",{src:e.image,alt:e.title,loading:"lazy",itemProp:"image"})}),m&&t.jsx("div",{className:"article-body",itemProp:"articleBody",dangerouslySetInnerHTML:{__html:m}}),e.tags?.length>0&&t.jsxs("div",{className:"article-tags",children:[t.jsx(E,{size:16}),e.tags.map(a=>t.jsx("span",{className:"tag",children:a},a))]})]})]}):t.jsxs("div",{className:"news-page animate-fade-in",children:[t.jsxs(g,{to:"/news",className:"back-button",children:[t.jsx(h,{size:18})," Back to News"]}),t.jsxs("div",{className:"article-not-found",children:[t.jsx("h2",{children:"Article not found"}),t.jsx("p",{children:"The article you're looking for doesn't exist or has been removed."})]})]})}export{I as default};
