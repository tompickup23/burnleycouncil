import{j as s}from"./tanstack-BHj98Y4o.js";import{r as n}from"./vendor-BUcjPAt-.js";import{u as y,a as f,L as v,S as C}from"./index-pGaQqd3_.js";import{M as _}from"./mail-C7pi4viO.js";import{P as w}from"./phone-DdEqgdt9.js";import"./recharts-DyzHFDWD.js";function A(){const r=y().council_name||"Council",{data:p,loading:u}=f(["/data/councillors.json","/data/politics_summary.json","/data/wards.json"]),[d,a,b]=p||[[],null,{}],[c,j]=n.useState(""),[t,x]=n.useState(""),[m,N]=n.useState(null);if(n.useEffect(()=>(document.title=`Council Politics | ${r} Council Transparency`,()=>{document.title=`${r} Council Transparency`}),[r]),u)return s.jsx(v,{message:"Loading councillor data..."});const h=d.filter(e=>{const i=!c||e.name?.toLowerCase().includes(c.toLowerCase())||e.ward?.toLowerCase().includes(c.toLowerCase()),l=!t||e.party===t;return i&&l}),o=a?.by_party||[];return s.jsxs("div",{className:"politics-page animate-fade-in",children:[s.jsxs("header",{className:"page-header",children:[s.jsx("h1",{children:"Council Politics"}),s.jsxs("p",{className:"subtitle",children:[d.length," councillors representing ",a?.total_wards||""," wards across ",r]})]}),a?.coalition&&s.jsxs("section",{className:"composition-section",children:[s.jsx("h2",{children:"Council Composition"}),s.jsxs("div",{className:"composition-grid",children:[s.jsxs("div",{className:"composition-card coalition",children:[s.jsx("h3",{children:a.coalition.type==="majority"?"Ruling Party":"Ruling Coalition"}),s.jsxs("div",{className:"coalition-makeup",children:[s.jsx("span",{className:"coalition-total",children:a.coalition.total_seats}),s.jsx("span",{className:"coalition-label",children:"seats"})]}),s.jsx("div",{className:"coalition-parties",children:(a.coalition.parties||[]).map(e=>{const i=o.find(g=>g.party===e);if(!i)return null;const l=i.color?.toLowerCase()==="#faa61a"||i.color?.toLowerCase()==="#ffd60a";return s.jsxs("span",{className:"party-chip",style:{background:i.color,color:l?"#000":void 0},children:[e," ",i.count]},e)})}),s.jsxs("p",{className:"coalition-note text-secondary",children:["Majority threshold: ",a.majority_threshold||Math.ceil((a.total_councillors||0)/2)+1," seats"]})]}),s.jsxs("div",{className:"composition-card",children:[s.jsx("h3",{children:"Opposition"}),s.jsxs("div",{className:"opposition-makeup",children:[s.jsx("span",{className:"opposition-total",children:a.opposition_seats}),s.jsx("span",{className:"opposition-label",children:"seats"})]}),s.jsx("div",{className:"opposition-parties",children:o.filter(e=>!(a.coalition.parties||[]).includes(e.party)).map(e=>{const i=e.color?.toLowerCase()==="#faa61a"||e.color?.toLowerCase()==="#ffd60a";return s.jsxs("span",{className:"party-chip",style:{background:e.color,color:i?"#000":void 0},children:[e.party," ",e.count]},e.party)})})]})]})]}),s.jsxs("section",{className:"seats-section",children:[s.jsx("h2",{children:"Seat Diagram"}),s.jsx("div",{className:"seats-diagram",children:o.map(e=>s.jsxs("div",{className:"party-seats",children:[s.jsx("div",{className:"seats-row",children:Array.from({length:e.count}).map((i,l)=>s.jsx("div",{className:"seat",style:{background:e.color},title:e.party},l))}),s.jsxs("span",{className:"party-label",style:{color:e.color},children:[e.party," (",e.count,")"]})]},e.party))})]}),s.jsxs("section",{className:"key-figures",children:[s.jsx("h2",{children:"Key Figures"}),s.jsxs("div",{className:"figures-grid",children:[a?.council_leader&&s.jsxs("div",{className:"figure-card",children:[s.jsx("span",{className:"figure-role",children:"Leader of the Council"}),s.jsx("span",{className:"figure-name",children:a.council_leader})]}),a?.deputy_leaders?.length>0&&a.deputy_leaders.map((e,i)=>s.jsxs("div",{className:"figure-card",children:[s.jsx("span",{className:"figure-role",children:"Deputy Leader"}),s.jsx("span",{className:"figure-name",children:e})]},i)),a?.mayor&&s.jsxs("div",{className:"figure-card",children:[s.jsx("span",{className:"figure-role",children:"Mayor"}),s.jsx("span",{className:"figure-name",children:a.mayor})]}),a?.deputy_mayor&&s.jsxs("div",{className:"figure-card",children:[s.jsx("span",{className:"figure-role",children:"Deputy Mayor"}),s.jsx("span",{className:"figure-name",children:a.deputy_mayor})]}),a?.opposition_leader&&s.jsxs("div",{className:"figure-card",children:[s.jsx("span",{className:"figure-role",children:"Opposition Leader"}),s.jsx("span",{className:"figure-name",children:a.opposition_leader})]})]})]}),s.jsxs("section",{className:"directory-section",children:[s.jsx("h2",{children:"All Councillors"}),s.jsxs("div",{className:"directory-filters",children:[s.jsxs("div",{className:"search-bar",children:[s.jsx(C,{size:18,className:"search-icon"}),s.jsx("input",{type:"text",placeholder:"Search by name or ward...",value:c,onChange:e=>j(e.target.value)})]}),s.jsxs("select",{value:t,onChange:e=>x(e.target.value),children:[s.jsx("option",{value:"",children:"All Parties"}),o.map(e=>s.jsx("option",{value:e.party,children:e.party},e.party))]})]}),s.jsx("div",{className:"councillors-grid",children:h.map(e=>s.jsxs("div",{className:"councillor-card",onClick:()=>N(m?.id===e.id?null:e),children:[s.jsxs("div",{className:"councillor-header",children:[s.jsx("div",{className:"party-indicator",style:{background:e.party_color}}),s.jsxs("div",{className:"councillor-info",children:[s.jsx("h3",{children:e.name}),s.jsx("span",{className:"ward-name",children:e.ward})]})]}),s.jsx("div",{className:"councillor-party",children:s.jsx("span",{className:"party-tag",style:{background:e.party_color+"30",color:e.party_color},children:e.party})}),e.roles?.length>0&&s.jsx("div",{className:"councillor-roles",children:e.roles.map((i,l)=>s.jsx("span",{className:"role-tag",children:i},l))}),m?.id===e.id&&s.jsxs("div",{className:"councillor-details",children:[e.email&&s.jsxs("a",{href:`mailto:${e.email}`,className:"detail-link",children:[s.jsx(_,{size:14}),e.email]}),e.phone&&s.jsxs("a",{href:`tel:${e.phone}`,className:"detail-link",children:[s.jsx(w,{size:14}),e.phone]})]})]},e.id))}),h.length===0&&s.jsx("p",{className:"no-results",children:"No councillors found matching your search."})]})]})}export{A as default};
